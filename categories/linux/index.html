<!DOCTYPE html>
<html lang="zh-cn">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=443&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Leon 的博客</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.124.0">
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    

    
      

    

    
    
      <link href="/categories/linux/index.xml" rel="alternate" type="application/rss+xml" title="Leon 的博客" />
      <link href="/categories/linux/index.xml" rel="feed" type="application/rss+xml" title="Leon 的博客" />
      
    

    
      <link rel="canonical" href="https://tanlanxing.github.io:443/categories/linux/">
    

    <meta property="og:title" content="Linux" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://tanlanxing.github.io:443/categories/linux/" />
<meta itemprop="name" content="Linux">
<meta itemprop="description" content=""><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Linux"/>
<meta name="twitter:description" content=""/>

	
  </head>

  <body class="ma0 avenir bg-near-white">

    

  <header>
    <div class="pb3-m pb6-l bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        Leon 的博客
      
    </a>
    <div class="flex-l items-center">
      

      
      
<div class="ananke-socials">
  
</div>

    </div>
  </div>
</nav>

      <div class="tc-l pv3 ph3 ph4-ns">
        <h1 class="f2 f-subheadline-l fw2 light-silver mb0 lh-title">
          Linux
        </h1>
        
      </div>
    </div>
  </header>


    <main class="pb7" role="main">
      
  <article class="cf pa3 pa4-m pa4-l">
    <div class="measure-wide-l center f4 lh-copy nested-copy-line-height nested-links mid-gray">
      <p>Below you will find pages that utilize the taxonomy term “Linux”</p>
    </div>
  </article>
  <div class="mw8 center">
    <section class="flex-ns flex-wrap justify-around mt5">
      
        <div class="relative w-100  mb4 bg-white">
          <div class="relative w-100 mb4 bg-white nested-copy-line-height">
  <div class="bg-white mb3 pa4 gray overflow-hidden">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/systemd-cgroup-process-management/" class="link black dim">
        Systemd Cgroup Process Management
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      0.背景知识 cgroup cgroup (Control Group) 是 linux 内核提供的一种机制，这种机制可以根据需求把一系列系统任务及其子任务整合(或分隔)到按资源划分等级的不同组内，从而为系统资源管理提供一个统一的框架。简单说，cgroup 可以限制、记录任务组所使用的物理资源。本质上来说，cgroup 是内核附加在程序上的一系列钩子(hook)，通过程序运行时对资源的调度触发相应的钩子以达到资源追踪和限制的目的。容器所依赖的基础之一就是 cgroup，本文不做展开。
cgroup 的设置有 3 种接口
接口文件
通过在挂载的 cgroup 文件系统中创建目录、文件，以及往可写文件中写入配置来实现
cgroup 工具：cgroup-bin
$ sudo apt install cgroup-bin $ cgexe --help systemd systemd systemd 是目前绝大多数主流 Linux 发行版的默认初始化系统，用于 Linux 系统和服务管理器，替代 initd。systemd 使用 cgroup 的层级关系来管理进程，同时 systemd 提供了 cgroups 的使用和管理接口。
1.问题的引出 公司产品包含一个 agent 服务，运行在客户主机上。agent 实现了自动升级机制。
Linux 下的实现如下：
agent 服务启动升级进程 upgrade upgrade 进程通过 fork 脱离 agent 服务进程 upgrade 进程停止 agent 服务 upgrade 进程更新 agent 程序文件 upgrade 进程启动 agent 服务 upgrade 进程退出 这套机制在 Linux 下一直正常运行着。最近反馈较高概率会出现升级失败，同时伴随着 agent 离线。
    </div>
    <a href="/posts/systemd-cgroup-process-management/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
    </section>
  </div>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://tanlanxing.github.io:443/" >
    &copy;  Leon 的博客 2025 
  </a>
    <div>
<div class="ananke-socials">
  
</div>
</div>
  </div>
</footer>

  </body>
</html>
